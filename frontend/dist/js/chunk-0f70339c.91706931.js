(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0f70339c"],{"7b21":function(t,e,a){"use strict";var n=a("e51f"),o=a.n(n);o.a},a157:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"admin_moderation"},[a("div",{staticClass:"admin_moderation__header"},[a("moderation-header",{attrs:{"selected-tab":"bans"}}),a("button",{staticClass:"button button--blue",on:{click:t.toggleShowAddNewBanModal}},[t._v("Add new ban")])],1),a("transition",{attrs:{name:"fade",mode:"out-in"}},[t.bans?t.bans.length?a("table",{key:"bans",staticClass:"admin_moderation__table"},[a("tr",[a("th",[t._v("User")]),a("th",[t._v("Ban type")]),a("th",[t._v("Date banned")]),a("th",[t._v("Message")]),a("th",[t._v("Action")])]),t._l(t.bans,function(e,n){return a("tr",[a("td",[t._v(t._s(e.User.username))]),a("td",[t._v(t._s(e.type))]),a("td",[t._v(t._s(t._f("formatDate")(e.createdAt)))]),a("td",[e.message?[t._v(t._s(e.message))]:a("i",[t._v("No message given")])],2),a("td",[a("button",{staticClass:"button button--red",on:{click:function(a){t.deleteBan(e,n)}}},[t._v("\n\t\t\t\t\t\tDelete ban\n\t\t\t\t\t")])])])})],2):a("div",{key:"no bans",staticClass:"overlay_message"},[a("span",{staticClass:"fa fa-thumbs-up"}),t._v("\n\t\t\tNo banned users\n\t\t")]):a("loading-message",{key:"loading"})],1),a("modal-window",{attrs:{width:"30rem","no-padding":!0},model:{value:t.$store.state.moderation.showAddNewBanModal,callback:function(e){t.$set(t.$store.state.moderation,"showAddNewBanModal",e)},expression:"$store.state.moderation.showAddNewBanModal"}},[a("div",{staticClass:"admin_moderation__add_new_ban_modal",attrs:{slot:"main"},slot:"main"},[a("div",{staticClass:"admin_moderation__add_new_ban_modal__overlay",class:{"admin_moderation__add_new_ban_modal__overlay--show":t.loading}},[a("loading-icon")],1),a("h2",[t._v("Ban or block a user")]),a("p",[t._v("Search for the user to ban, then select the relevant ban type for the user")]),a("form",{on:{submit:function(e){return e.preventDefault(),t.addBan(e)}}},[a("div",[a("fancy-input",{attrs:{placeholder:"Username to ban",width:"15rem",large:!0},model:{value:t.$store.state.moderation.username,callback:function(e){t.$set(t.$store.state.moderation,"username",e)},expression:"$store.state.moderation.username"}})],1),a("div",[a("fancy-input",{attrs:{placeholder:"Message to user (optional)",width:"15rem",large:!0},model:{value:t.$store.state.moderation.message,callback:function(e){t.$set(t.$store.state.moderation,"message",e)},expression:"$store.state.moderation.message"}})],1),a("div",[a("select-button",{attrs:{options:t.$store.state.moderation.options,name:"test"},model:{value:t.$store.state.moderation.selectedOption,callback:function(e){t.$set(t.$store.state.moderation,"selectedOption",e)},expression:"$store.state.moderation.selectedOption"}})],1),a("input",{staticStyle:{display:"none"},attrs:{type:"submit"}})])]),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("button",{staticClass:"button button--modal button--green",on:{click:t.addBan}},[t._v("\n\t\t\t\tAdd ban\n\t\t\t")]),a("button",{staticClass:"button button--modal",on:{click:t.toggleShowAddNewBanModal}},[t._v("\n\t\t\t\tCancel\n\t\t\t")])])])],1)},o=[],s=a("6334"),i=a("6307"),d=a("80e3"),r=a("5016"),l=a("96cf"),c=a("9098"),m=a("da16"),u=a("23f8"),h=a("c5af"),b=a("6f58"),_=a("c4b0"),p={name:"AdminDashboard",components:{TabView:s["a"],ModalWindow:i["a"],FancyInput:d["a"],SelectButton:r["a"],MenuButton:l["a"],AvatarIcon:c["a"],ConfirmModal:m["a"],ModerationHeader:u["a"],LoadingIcon:h["a"],LoadingMessage:b["a"]},data:function(){return{loading:!1,bans_:null}},computed:{bans:function(){return this.bans_?this.bans_.map(function(t){return t.ipBanned?t.type="IP banned":t.canCreateThreads&&!t.canCreatePosts?t.type="Posting replies":t.canCreatePosts&&!t.canCreateThreads?t.type="Creating threads":t.type="Posting replies and creating threads",t}):null}},methods:{toggleShowAddNewBanModal:function(){this.$store.commit("moderation/setModal",!this.$store.state.moderation.showAddNewBanModal),this.$store.dispatch("moderation/clearModal")},addBan:function(){var t=this,e=this.$store.state.moderation,a={username:e.username};e.message.trim().length&&(a.message=e.message),"both"===e.selectedOption?(a.canCreatePosts=!1,a.canCreateThreads=!1):"thread"===e.selectedOption?a.canCreateThreads=!1:"post"===e.selectedOption?a.canCreatePosts=!1:a.ipBanned=!0,this.loading=!0,this.axios.post("/api/v1/ban",a).then(function(e){t.loading=!1,t.bans_.push(e.data),t.toggleShowAddNewBanModal(),t.$store.dispatch("moderation/clearModal")}).catch(function(e){t.loading=!1,Object(_["a"])(t.$store)(e)})},deleteBan:function(t,e){var a=this;this.axios.delete("/api/v1/ban/"+t.id).then(function(t){a.bans_.splice(e,1)}).catch(Object(_["a"])(this.$store))}},mounted:function(){var t=this;this.$store.dispatch("setTitle","admin | moderation"),this.axios.get("/api/v1/ban").then(function(e){t.bans_=e.data}).catch(Object(_["a"])(this.$store))}},f=p,v=(a("7b21"),a("2877")),g=Object(v["a"])(f,n,o,!1,null,"9f1e3f8c",null);g.options.__file="AdminModerationBannedUsers.vue";e["default"]=g.exports},e51f:function(t,e,a){}}]);
//# sourceMappingURL=chunk-0f70339c.91706931.js.map