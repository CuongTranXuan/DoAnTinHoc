(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-76432e6d"],{"0c1c":function(e,t,o){"use strict";var r=o("428f"),a=o.n(r);a.a},"428f":function(e,t,o){},8649:function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"admin_moderation"},[o("moderation-header",{attrs:{"selected-tab":"reports"}}),o("confirm-modal",{attrs:{text:"Remove",color:"red"},on:{confirm:e.removePost},model:{value:e.removePostObj.showConfirmModal,callback:function(t){e.$set(e.removePostObj,"showConfirmModal",t)},expression:"removePostObj.showConfirmModal"}},[e._v("\n\t\tAre you sure you want to remove this post?\n\t")]),o("confirm-modal",{attrs:{text:"Delete",color:"red"},on:{confirm:e.deleteThread},model:{value:e.removePostObj.showThreadDeleteModal,callback:function(t){e.$set(e.removePostObj,"showThreadDeleteModal",t)},expression:"removePostObj.showThreadDeleteModal"}},[e._v("\n\t\tAre you sure you want to delete the thread containing this post?\n\t")]),o("transition",{attrs:{name:"fade",mode:"out-in"}},[e.reports?e.filteredReports.length?o("div",{key:"reports",staticClass:"admin_moderation__reports"},[o("div",{staticClass:"admin_moderation__report admin_moderation__report--header"},[o("div",{staticClass:"admin_moderation__report__post admin_moderation__report--cell_border admin_moderation__report--cell_border-hidden"},[e._v("\n\t\t\t\t\tUser and post reported\n\t\t\t\t")]),o("div",{staticClass:"admin_moderation__report__reason admin_moderation__report--cell_border admin_moderation__report--cell_border-hidden"},[e._v("Report reason")]),o("div",{staticClass:"admin_moderation__report__flagged_by admin_moderation__report--cell_border admin_moderation__report--cell_border-hidden"},[e._v("\n\t\t\t\t\tReported by user\n\t\t\t\t")]),o("div",{staticClass:"admin_moderation__report__actions"},[e._v("\n\t\t\t\t\tActions\n\t\t\t\t")])]),e._l(e.filteredReports,function(t,r){return o("div",{staticClass:"admin_moderation__report"},[o("div",{staticClass:"admin_moderation__report__post admin_moderation__report--cell_border"},[o("div",{staticClass:"admin_moderation__report__post__header"},[o("avatar-icon",{staticClass:"admin_moderation__report__flagged_by__avatar",attrs:{size:"small",user:t.Post.User}}),o("div",[o("div",{staticClass:"admin_moderation__report__post__user"},[e._v(e._s(t.PostUserUsername))]),o("div",{staticClass:"admin_moderation__report__flagged_by__date"},[e._v("Posted "+e._s(e._f("formatDate")(t.createdAt)))])])],1),o("div",{staticClass:"admin_moderation__report__post__content"},[e._v(e._s(e._f("truncate")(e._f("stripTags")(t.Post.content),150)))])]),o("div",{staticClass:"admin_moderation__report__reason admin_moderation__report--cell_border"},[e._v(e._s(t.reason))]),o("div",{staticClass:"admin_moderation__report__flagged_by admin_moderation__report--cell_border"},[o("avatar-icon",{staticClass:"admin_moderation__report__flagged_by__avatar",attrs:{size:"small",user:t.FlaggedByUser}}),o("div",{staticClass:"admin_moderation__report__flagged_by__text_info"},[o("div",{staticClass:"admin_moderation__report__flagged_by__user"},[e._v(e._s(t.FlaggedByUserUsername))]),o("div",{staticClass:"admin_moderation__report__flagged_by__date"},[e._v(e._s(e._f("formatDate")(t.createdAt)))])])],1),o("div",{staticClass:"admin_moderation__report__actions"},[o("button",{staticClass:"button button--red",on:{click:function(o){e.removePost(t,r)}}},[e._v("Remove post")]),o("menu-button",{attrs:{options:e.reportMenuOptions},on:{delete:function(o){e.deleteReport(t.id,r)},ban:function(o){e.banUser(t,r)},deleteThread:function(o){e.deleteThread(t,r)}}},[o("button",{staticClass:"button"},[e._v("More optionsâ€¦")])])],1)])})],2):o("div",{key:"no reports",staticClass:"overlay_message"},[o("span",{staticClass:"fa fa-thumbs-up"}),e._v("\n\t\t\tNo user reports\n\t\t")]):o("loading-message",{key:"loading"})],1)],1)},a=[],s=(o("cadf"),o("551c"),o("097d"),o("6334")),n=o("6307"),i=o("80e3"),d=o("5016"),_=o("96cf"),l=o("6f58"),m=o("9098"),c=o("da16"),p=o("23f8"),u=o("c4b0"),v={name:"AdminDashboard",components:{TabView:s["a"],ModalWindow:n["a"],FancyInput:i["a"],SelectButton:d["a"],MenuButton:_["a"],LoadingMessage:l["a"],AvatarIcon:m["a"],ConfirmModal:c["a"],ModerationHeader:p["a"]},data:function(){return{reportMenuOptions:[{value:"Delete report",event:"delete"},{value:"Ban or block user",event:"ban"},{value:"Delete thread",event:"deleteThread"}],reports:null,removePostObj:{showConfirmModal:!1,showThreadDeleteModal:!1,report:null,index:null}}},computed:{filteredReports:function(){return this.reports?this.reports.filter(function(e){return e.Post}).map(function(e){var t=Object.create(e);return e.Post.User?t.PostUserUsername=e.Post.User.username:t.PostUserUsername="[Deleted]",e.FlaggedByUser?t.FlaggedByUserUsername=e.FlaggedByUser.username:t.FlaggedByUserUsername="[Deleted]",t}):null}},methods:{deleteReport:function(e,t){var o=this;return this.axios.delete("/api/v1/report/"+e).then(function(e){o.reports.splice(t,1)}).catch(Object(u["a"])(this.$store))},deleteThread:function(e,t){var o=this;if(e)this.removePostObj.report=e,this.removePostObj.index=t,this.removePostObj.showThreadDeleteModal=!0;else{var r=this.removePostObj.report.Post.Thread.id;this.axios.delete("/api/v1/thread/"+r).then(function(){o.reports=o.reports.filter(function(e){return e.Post.Thread.id!==r})}).catch(Object(u["a"])(this.$store))}},removePost:function(e,t){var o=this;e?(this.removePostObj.report=e,this.removePostObj.index=t,this.removePostObj.showConfirmModal=!0):this.axios.delete("/api/v1/post/"+this.removePostObj.report.Post.id).then(function(e){return o.axios.delete("/api/v1/report/"+o.removePostObj.report.id)}).then(function(e){o.reports.splice(o.removePostObj.index,1)}).catch(Object(u["a"])(this.$store))},banUser:function(e,t){var o=this;this.$router.push("bans"),setTimeout(function(){o.$store.commit("moderation/setModal",!0),o.$store.commit("moderation/setUsername",e.Post.User.username)},0)}},mounted:function(){var e=this;this.$store.dispatch("setTitle","admin | moderation"),this.axios.get("/api/v1/report").then(function(t){e.reports=t.data}).catch(Object(u["a"])(this.$store))}},h=v,f=(o("0c1c"),o("2877")),b=Object(f["a"])(h,r,a,!1,null,"3d5086a3",null);b.options.__file="AdminModerationReports.vue";t["default"]=b.exports}}]);
//# sourceMappingURL=chunk-76432e6d.3b0ac58a.js.map