{"version":3,"sources":["webpack:///./src/components/routes/AdminModerationReports.vue?1ccd","webpack:///./src/components/routes/AdminModerationReports.vue?7512","webpack:///src/components/routes/AdminModerationReports.vue","webpack:///./src/components/routes/AdminModerationReports.vue?c179","webpack:///./src/components/routes/AdminModerationReports.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_AdminModerationReports_vue_vue_type_style_index_0_id_3d5086a3_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_AdminModerationReports_vue_vue_type_style_index_0_id_3d5086a3_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","selected-tab","text","color","on","confirm","removePost","model","value","removePostObj","callback","$$v","$set","expression","_v","deleteThread","name","mode","reports","filteredReports","key","_l","report","$index","size","user","Post","User","_s","PostUserUsername","_f","createdAt","content","reason","FlaggedByUser","FlaggedByUserUsername","click","$event","options","reportMenuOptions","delete","deleteReport","id","ban","banUser","staticRenderFns","AdminModerationReportsvue_type_script_lang_js_","components","TabView","ModalWindow","FancyInput","SelectButton","MenuButton","LoadingMessage","AvatarIcon","ConfirmModal","ModerationHeader","data","event","showConfirmModal","showThreadDeleteModal","index","computed","filter","map","clone","Object","create","username","methods","_this","axios","then","_","splice","catch","errorHandler","$store","_this2","threadId","Thread","_this3","_this4","$router","push","setTimeout","commit","mounted","_this5","dispatch","get","res","routes_AdminModerationReportsvue_type_script_lang_js_","component","componentNormalizer","__file","__webpack_exports__"],"mappings":"kHAAA,IAAAA,EAAAC,EAAA,QAAAC,EAAAD,EAAAE,EAAAH,GAAukBE,EAAG,qECA1kB,IAAAE,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,oBAA+B,CAAAF,EAAA,qBAA0BG,MAAA,CAAOC,eAAA,aAA0BJ,EAAA,iBAAsBG,MAAA,CAAOE,KAAA,SAAAC,MAAA,OAA8BC,GAAA,CAAKC,QAAAZ,EAAAa,YAAyBC,MAAA,CAAQC,MAAAf,EAAAgB,cAAA,iBAAAC,SAAA,SAAAC,GAAoElB,EAAAmB,KAAAnB,EAAAgB,cAAA,mBAAAE,IAAqDE,WAAA,mCAA8C,CAAApB,EAAAqB,GAAA,0DAAAjB,EAAA,iBAAuFG,MAAA,CAAOE,KAAA,SAAAC,MAAA,OAA8BC,GAAA,CAAKC,QAAAZ,EAAAsB,cAA2BR,MAAA,CAAQC,MAAAf,EAAAgB,cAAA,sBAAAC,SAAA,SAAAC,GAAyElB,EAAAmB,KAAAnB,EAAAgB,cAAA,wBAAAE,IAA0DE,WAAA,wCAAmD,CAAApB,EAAAqB,GAAA,gFAAAjB,EAAA,cAA0GG,MAAA,CAAOgB,KAAA,OAAAC,KAAA,WAA+B,CAAAxB,EAAAyB,QAAqDzB,EAAA0B,gBAAA,OAAAtB,EAAA,OAAyCuB,IAAA,UAAArB,YAAA,6BAAsD,CAAAF,EAAA,OAAYE,YAAA,6DAAwE,CAAAF,EAAA,OAAYE,YAAA,qHAAgI,CAAAN,EAAAqB,GAAA,kDAAAjB,EAAA,OAAqEE,YAAA,uHAAkI,CAAAN,EAAAqB,GAAA,mBAAAjB,EAAA,OAAsCE,YAAA,2HAAsI,CAAAN,EAAAqB,GAAA,4CAAAjB,EAAA,OAA+DE,YAAA,qCAAgD,CAAAN,EAAAqB,GAAA,qCAAArB,EAAA4B,GAAA5B,EAAA,yBAAA6B,EAAAC,GAAmG,OAAA1B,EAAA,OAAiBE,YAAA,4BAAuC,CAAAF,EAAA,OAAYE,YAAA,wEAAmF,CAAAF,EAAA,OAAYE,YAAA,0CAAqD,CAAAF,EAAA,eAAoBE,YAAA,+CAAAC,MAAA,CAAkEwB,KAAA,QAAAC,KAAAH,EAAAI,KAAAC,QAAwC9B,EAAA,OAAAA,EAAA,OAAsBE,YAAA,wCAAmD,CAAAN,EAAAqB,GAAArB,EAAAmC,GAAAN,EAAAO,qBAAAhC,EAAA,OAAsDE,YAAA,8CAAyD,CAAAN,EAAAqB,GAAA,UAAArB,EAAAmC,GAAAnC,EAAAqC,GAAA,aAAArC,CAAA6B,EAAAS,kBAAA,GAAAlC,EAAA,OAAqFE,YAAA,2CAAsD,CAAAN,EAAAqB,GAAArB,EAAAmC,GAAAnC,EAAAqC,GAAA,WAAArC,GAAAqC,GAAA,YAAArC,CAAA6B,EAAAI,KAAAM,SAAA,WAAAnC,EAAA,OAAiGE,YAAA,0EAAqF,CAAAN,EAAAqB,GAAArB,EAAAmC,GAAAN,EAAAW,WAAApC,EAAA,OAA4CE,YAAA,8EAAyF,CAAAF,EAAA,eAAoBE,YAAA,+CAAAC,MAAA,CAAkEwB,KAAA,QAAAC,KAAAH,EAAAY,iBAA4CrC,EAAA,OAAYE,YAAA,mDAA8D,CAAAF,EAAA,OAAYE,YAAA,8CAAyD,CAAAN,EAAAqB,GAAArB,EAAAmC,GAAAN,EAAAa,0BAAAtC,EAAA,OAA2DE,YAAA,8CAAyD,CAAAN,EAAAqB,GAAArB,EAAAmC,GAAAnC,EAAAqC,GAAA,aAAArC,CAAA6B,EAAAS,kBAAA,GAAAlC,EAAA,OAA2EE,YAAA,qCAAgD,CAAAF,EAAA,UAAeE,YAAA,qBAAAK,GAAA,CAAqCgC,MAAA,SAAAC,GAAyB5C,EAAAa,WAAAgB,EAAAC,MAAiC,CAAA9B,EAAAqB,GAAA,iBAAAjB,EAAA,eAA4CG,MAAA,CAAOsC,QAAA7C,EAAA8C,mBAAgCnC,GAAA,CAAKoC,OAAA,SAAAH,GAA0B5C,EAAAgD,aAAAnB,EAAAoB,GAAAnB,IAAoCoB,IAAA,SAAAN,GAAwB5C,EAAAmD,QAAAtB,EAAAC,IAA4BR,aAAA,SAAAsB,GAAiC5C,EAAAsB,aAAAO,EAAAC,MAAmC,CAAA1B,EAAA,UAAeE,YAAA,UAAqB,CAAAN,EAAAqB,GAAA,8BAAoC,GAAAjB,EAAA,OAAgBuB,IAAA,aAAArB,YAAA,mBAA+C,CAAAF,EAAA,QAAaE,YAAA,oBAA8BN,EAAAqB,GAAA,mCAA37FjB,EAAA,mBAAuCuB,IAAA,aAAo5F,QACj3HyB,EAAA,2JCuFAC,EAAA,CACA9B,KAAA,iBACA+B,WAAA,CACAC,UAAA,KACAC,cAAA,KACAC,aAAA,KACAC,eAAA,KACAC,aAAA,KACAC,iBAAA,KACAC,aAAA,KACAC,eAAA,KACAC,mBAAA,MAEAC,KAbA,WAcA,OACAlB,kBAAA,CACA,CAAA/B,MAAA,gBAAAkD,MAAA,UACA,CAAAlD,MAAA,oBAAAkD,MAAA,OACA,CAAAlD,MAAA,gBAAAkD,MAAA,iBAEAxC,QAAA,KAEAT,cAAA,CACAkD,kBAAA,EACAC,uBAAA,EACAtC,OAAA,KACAuC,MAAA,QAIAC,SAAA,CACA3C,gBADA,WAEA,OAAAzB,KAAAwB,QAEAxB,KAAAwB,QAEA6C,OAAA,SAAAzC,GAAA,OAAAA,EAAAI,OACAsC,IAAA,SAAA1C,GACA,IAAA2C,EAAAC,OAAAC,OAAA7C,GAgBA,OAZAA,EAAAI,KAAAC,KAGAsC,EAAApC,iBAAAP,EAAAI,KAAAC,KAAAyC,SAFAH,EAAApC,iBAAA,YAKAP,EAAAY,cAGA+B,EAAA9B,sBAAAb,EAAAY,cAAAkC,SAFAH,EAAA9B,sBAAA,YAKA8B,IAtBA,OA0BAI,QAAA,CACA5B,aADA,SACAC,EAAAmB,GAAA,IAAAS,EAAA5E,KACA,OAAAA,KAAA6E,MACA/B,OAAA,kBAAAE,GACA8B,KAAA,SAAAC,GACAH,EAAApD,QAAAwD,OAAAb,EAAA,KAEAc,MAAAT,OAAAU,EAAA,KAAAV,CAAAxE,KAAAmF,UAEA9D,aATA,SASAO,EAAAuC,GAAA,IAAAiB,EAAApF,KACA,GAAA4B,EACA5B,KAAAe,cAAAa,SACA5B,KAAAe,cAAAoD,QAEAnE,KAAAe,cAAAmD,uBAAA,MACA,CACA,IAAAmB,EAAArF,KAAAe,cAAAa,OAAAI,KAAAsD,OAAAtC,GAEAhD,KAAA6E,MACA/B,OAAA,kBAAAuC,GACAP,KAAA,WAGAM,EAAA5D,QAAA4D,EAAA5D,QAAA6C,OAAA,SAAAzC,GACA,OAAAA,EAAAI,KAAAsD,OAAAtC,KAAAqC,MAIAJ,MAAAT,OAAAU,EAAA,KAAAV,CAAAxE,KAAAmF,WAGAvE,WA/BA,SA+BAgB,EAAAuC,GAAA,IAAAoB,EAAAvF,KACA4B,GACA5B,KAAAe,cAAAa,SACA5B,KAAAe,cAAAoD,QAEAnE,KAAAe,cAAAkD,kBAAA,GAEAjE,KAAA6E,MACA/B,OAAA,gBAAA9C,KAAAe,cAAAa,OAAAI,KAAAgB,IACA8B,KAAA,SAAAC,GACA,OAAAQ,EAAAV,MAAA/B,OAAA,kBAAAyC,EAAAxE,cAAAa,OAAAoB,MAEA8B,KAAA,SAAAC,GACAQ,EAAA/D,QAAAwD,OAAAO,EAAAxE,cAAAoD,MAAA,KAEAc,MAAAT,OAAAU,EAAA,KAAAV,CAAAxE,KAAAmF,UAIAjC,QAlDA,SAkDAtB,EAAAuC,GAAA,IAAAqB,EAAAxF,KACAA,KAAAyF,QAAAC,KAAA,QAEAC,WAAA,WACAH,EAAAL,OAAAS,OAAA,0BACAJ,EAAAL,OAAAS,OAAA,yBAAAhE,EAAAI,KAAAC,KAAAyC,WACA,KAGAmB,QArHA,WAqHA,IAAAC,EAAA9F,KACAA,KAAAmF,OAAAY,SAAA,iCAEA/F,KAAA6E,MACAmB,IAAA,kBACAlB,KAAA,SAAAmB,GACAH,EAAAtE,QAAAyE,EAAAlC,OAEAkB,MAAAT,OAAAU,EAAA,KAAAV,CAAAxE,KAAAmF,WCrN+We,EAAA,0BCQ/WC,EAAgB3B,OAAA4B,EAAA,KAAA5B,CACd0B,EACApG,EACAqD,GACF,EACA,KACA,WACA,MAIAgD,EAAAvD,QAAAyD,OAAA,6BACeC,EAAA,WAAAH","file":"js/chunk-76432e6d.3b0ac58a.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminModerationReports.vue?vue&type=style&index=0&id=3d5086a3&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminModerationReports.vue?vue&type=style&index=0&id=3d5086a3&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"admin_moderation\"},[_c('moderation-header',{attrs:{\"selected-tab\":\"reports\"}}),_c('confirm-modal',{attrs:{\"text\":\"Remove\",\"color\":\"red\"},on:{\"confirm\":_vm.removePost},model:{value:(_vm.removePostObj.showConfirmModal),callback:function ($$v) {_vm.$set(_vm.removePostObj, \"showConfirmModal\", $$v)},expression:\"removePostObj.showConfirmModal\"}},[_vm._v(\"\\n\\t\\tAre you sure you want to remove this post?\\n\\t\")]),_c('confirm-modal',{attrs:{\"text\":\"Delete\",\"color\":\"red\"},on:{\"confirm\":_vm.deleteThread},model:{value:(_vm.removePostObj.showThreadDeleteModal),callback:function ($$v) {_vm.$set(_vm.removePostObj, \"showThreadDeleteModal\", $$v)},expression:\"removePostObj.showThreadDeleteModal\"}},[_vm._v(\"\\n\\t\\tAre you sure you want to delete the thread containing this post?\\n\\t\")]),_c('transition',{attrs:{\"name\":\"fade\",\"mode\":\"out-in\"}},[(!_vm.reports)?_c('loading-message',{key:\"loading\"}):(_vm.filteredReports.length)?_c('div',{key:\"reports\",staticClass:\"admin_moderation__reports\"},[_c('div',{staticClass:\"admin_moderation__report admin_moderation__report--header\"},[_c('div',{staticClass:\"admin_moderation__report__post admin_moderation__report--cell_border admin_moderation__report--cell_border-hidden\"},[_vm._v(\"\\n\\t\\t\\t\\t\\tUser and post reported\\n\\t\\t\\t\\t\")]),_c('div',{staticClass:\"admin_moderation__report__reason admin_moderation__report--cell_border admin_moderation__report--cell_border-hidden\"},[_vm._v(\"Report reason\")]),_c('div',{staticClass:\"admin_moderation__report__flagged_by admin_moderation__report--cell_border admin_moderation__report--cell_border-hidden\"},[_vm._v(\"\\n\\t\\t\\t\\t\\tReported by user\\n\\t\\t\\t\\t\")]),_c('div',{staticClass:\"admin_moderation__report__actions\"},[_vm._v(\"\\n\\t\\t\\t\\t\\tActions\\n\\t\\t\\t\\t\")])]),_vm._l((_vm.filteredReports),function(report,$index){return _c('div',{staticClass:\"admin_moderation__report\"},[_c('div',{staticClass:\"admin_moderation__report__post admin_moderation__report--cell_border\"},[_c('div',{staticClass:\"admin_moderation__report__post__header\"},[_c('avatar-icon',{staticClass:\"admin_moderation__report__flagged_by__avatar\",attrs:{\"size\":\"small\",\"user\":report.Post.User}}),_c('div',[_c('div',{staticClass:\"admin_moderation__report__post__user\"},[_vm._v(_vm._s(report.PostUserUsername))]),_c('div',{staticClass:\"admin_moderation__report__flagged_by__date\"},[_vm._v(\"Posted \"+_vm._s(_vm._f(\"formatDate\")(report.createdAt)))])])],1),_c('div',{staticClass:\"admin_moderation__report__post__content\"},[_vm._v(_vm._s(_vm._f(\"truncate\")(_vm._f(\"stripTags\")(report.Post.content),150)))])]),_c('div',{staticClass:\"admin_moderation__report__reason admin_moderation__report--cell_border\"},[_vm._v(_vm._s(report.reason))]),_c('div',{staticClass:\"admin_moderation__report__flagged_by admin_moderation__report--cell_border\"},[_c('avatar-icon',{staticClass:\"admin_moderation__report__flagged_by__avatar\",attrs:{\"size\":\"small\",\"user\":report.FlaggedByUser}}),_c('div',{staticClass:\"admin_moderation__report__flagged_by__text_info\"},[_c('div',{staticClass:\"admin_moderation__report__flagged_by__user\"},[_vm._v(_vm._s(report.FlaggedByUserUsername))]),_c('div',{staticClass:\"admin_moderation__report__flagged_by__date\"},[_vm._v(_vm._s(_vm._f(\"formatDate\")(report.createdAt)))])])],1),_c('div',{staticClass:\"admin_moderation__report__actions\"},[_c('button',{staticClass:\"button button--red\",on:{\"click\":function($event){_vm.removePost(report, $index)}}},[_vm._v(\"Remove post\")]),_c('menu-button',{attrs:{\"options\":_vm.reportMenuOptions},on:{\"delete\":function($event){_vm.deleteReport(report.id, $index)},\"ban\":function($event){_vm.banUser(report, $index)},\"deleteThread\":function($event){_vm.deleteThread(report, $index)}}},[_c('button',{staticClass:\"button\"},[_vm._v(\"More options…\")])])],1)])})],2):_c('div',{key:\"no reports\",staticClass:\"overlay_message\"},[_c('span',{staticClass:\"fa fa-thumbs-up\"}),_vm._v(\"\\n\\t\\t\\tNo user reports\\n\\t\\t\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class='admin_moderation'>\n\t\t<moderation-header selected-tab='reports'></moderation-header>\n\n\t\t<confirm-modal v-model='removePostObj.showConfirmModal' @confirm='removePost' text='Remove' color='red'>\n\t\t\tAre you sure you want to remove this post?\n\t\t</confirm-modal>\n\n\t\t<confirm-modal v-model='removePostObj.showThreadDeleteModal' @confirm='deleteThread' text='Delete' color='red'>\n\t\t\tAre you sure you want to delete the thread containing this post?\n\t\t</confirm-modal>\n\n\t\t<transition name='fade' mode='out-in'>\n\t\t\t<loading-message v-if='!reports' key='loading'></loading-message>\n\n\t\t\t<div\n\t\t\t\tclass='admin_moderation__reports'\n\t\t\t\tv-else-if='filteredReports.length'\n\t\t\t\tkey='reports'\n\t\t\t>\n\n\t\t\t\t<div class='admin_moderation__report admin_moderation__report--header'>\n\t\t\t\t\t<div class='admin_moderation__report__post admin_moderation__report--cell_border admin_moderation__report--cell_border-hidden'>\n\t\t\t\t\t\tUser and post reported\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='admin_moderation__report__reason admin_moderation__report--cell_border admin_moderation__report--cell_border-hidden'>Report reason</div>\n\t\t\t\t\t<div class='admin_moderation__report__flagged_by admin_moderation__report--cell_border admin_moderation__report--cell_border-hidden'>\n\t\t\t\t\t\tReported by user\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='admin_moderation__report__actions'>\n\t\t\t\t\t\tActions\n\t\t\t\t\t</div>\n\t\t\t\t</div>\t\t\t\t\n\n\t\t\t\t<div class='admin_moderation__report' v-for='(report, $index) in filteredReports'>\n\t\t\t\t\t<div class='admin_moderation__report__post admin_moderation__report--cell_border'>\n\t\t\t\t\t\t<div class='admin_moderation__report__post__header'>\n\t\t\t\t\t\t\t<avatar-icon class='admin_moderation__report__flagged_by__avatar' size='small' :user='report.Post.User'></avatar-icon>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div class='admin_moderation__report__post__user'>{{report.PostUserUsername}}</div>\n\t\t\t\t\t\t\t\t<div class='admin_moderation__report__flagged_by__date'>Posted {{report.createdAt| formatDate}}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='admin_moderation__report__post__content'>{{report.Post.content | stripTags | truncate(150)}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='admin_moderation__report__reason admin_moderation__report--cell_border'>{{report.reason}}</div>\n\t\t\t\t\t<div class='admin_moderation__report__flagged_by admin_moderation__report--cell_border'>\n\t\t\t\t\t\t<avatar-icon class='admin_moderation__report__flagged_by__avatar' size='small' :user='report.FlaggedByUser'></avatar-icon>\n\t\t\t\t\t\t<div class='admin_moderation__report__flagged_by__text_info'>\n\t\t\t\t\t\t\t<div class='admin_moderation__report__flagged_by__user'>{{report.FlaggedByUserUsername}}</div>\n\t\t\t\t\t\t\t<div class='admin_moderation__report__flagged_by__date'>{{report.createdAt| formatDate}}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='admin_moderation__report__actions'>\n\t\t\t\t\t\t<button class='button button--red' @click='removePost(report, $index)'>Remove post</button>\n\t\t\t\t\t\t<menu-button\n\t\t\t\t\t\t\t@delete='deleteReport(report.id, $index)'\n\t\t\t\t\t\t\t@ban='banUser(report, $index)'\n\t\t\t\t\t\t\t@deleteThread='deleteThread(report, $index)'\n\t\t\t\t\t\t\t:options='reportMenuOptions'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<button class='button'>More options&hellip;</button>\n\t\t\t\t\t\t</menu-button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class='overlay_message' v-else key='no reports'>\n\t\t\t\t<span class='fa fa-thumbs-up'></span>\n\t\t\t\tNo user reports\n\t\t\t</div>\n\t\t</transition>\n\t</div>\n</template>\n\n<script>\n\timport TabView from '../TabView'\n\timport ModalWindow from '../ModalWindow'\n\timport FancyInput from '../FancyInput'\n\timport SelectButton from '../SelectButton'\n\timport MenuButton from '../MenuButton'\n\timport LoadingMessage from '../LoadingMessage'\n\timport AvatarIcon from '../AvatarIcon'\n\timport ConfirmModal from '../ConfirmModal'\n\timport ModerationHeader from '../ModerationHeader'\n\n\timport AjaxErrorHandler from '../../assets/js/errorHandler'\n\n\texport default {\n\t\tname: 'AdminDashboard',\n\t\tcomponents: {\n\t\t\tTabView,\n\t\t\tModalWindow,\n\t\t\tFancyInput,\n\t\t\tSelectButton,\n\t\t\tMenuButton,\n\t\t\tLoadingMessage,\n\t\t\tAvatarIcon,\n\t\t\tConfirmModal,\n\t\t\tModerationHeader\n\t\t},\n\t\tdata () {\n\t\t\treturn {\n\t\t\t\treportMenuOptions: [\n\t\t\t\t\t{ value: \"Delete report\", event: 'delete' },\n\t\t\t\t\t{ value: \"Ban or block user\", event: 'ban' },\n\t\t\t\t\t{ value: \"Delete thread\", event: 'deleteThread' }\n\t\t\t\t],\n\t\t\t\treports: null,\n\n\t\t\t\tremovePostObj: {\n\t\t\t\t\tshowConfirmModal: false,\n\t\t\t\t\tshowThreadDeleteModal: false,\n\t\t\t\t\treport: null,\n\t\t\t\t\tindex: null\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tcomputed: {\n\t\t\tfilteredReports () {\n\t\t\t\tif (!this.reports) return null;\n\n\t\t\t\treturn this.reports\n\t\t\t\t\t//Only show reports not already deleted\n\t\t\t\t\t.filter(report => report.Post)\n\t\t\t\t\t.map(report => {\n\t\t\t\t\t\tlet clone = Object.create(report);\n\n\t\t\t\t\t\t//Provide username text if user deleted for post\n\t\t\t\t\t\t//or flaggedByUser\t\n\t\t\t\t\t\tif(!report.Post.User) {\n\t\t\t\t\t\t\tclone.PostUserUsername = '[Deleted]';\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclone.PostUserUsername = report.Post.User.username;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif(!report.FlaggedByUser) {\n\t\t\t\t\t\t\tclone.FlaggedByUserUsername = '[Deleted]';\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclone.FlaggedByUserUsername = report.FlaggedByUser.username;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn clone;\n\t\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\tdeleteReport (id, index) {\n\t\t\t\treturn this.axios\n\t\t\t\t\t.delete('/api/v1/report/' + id)\n\t\t\t\t\t.then(_ => {\n\t\t\t\t\t\tthis.reports.splice(index, 1)\n\t\t\t\t\t})\n\t\t\t\t\t.catch(AjaxErrorHandler(this.$store))\n\t\t\t},\n\t\t\tdeleteThread (report, index) {\n\t\t\t\tif(report) {\n\t\t\t\t\tthis.removePostObj.report = report\n\t\t\t\t\tthis.removePostObj.index = index\n\n\t\t\t\t\tthis.removePostObj.showThreadDeleteModal = true\n\t\t\t\t} else {\n\t\t\t\t\tlet threadId = this.removePostObj.report.Post.Thread.id\n\n\t\t\t\t\tthis.axios\n\t\t\t\t\t\t.delete('/api/v1/thread/' + threadId)\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t//Get reports with id of deleted thread\n\t\t\t\t\t\t\t//and remove them locally\n\t\t\t\t\t\t\tthis.reports = this.reports.filter(report => {\n\t\t\t\t\t\t\t\treturn report.Post.Thread.id !== threadId\n\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(AjaxErrorHandler(this.$store))\n\t\t\t\t}\n\t\t\t},\n\t\t\tremovePost (report, index) {\n\t\t\t\tif(report) {\n\t\t\t\t\tthis.removePostObj.report = report\n\t\t\t\t\tthis.removePostObj.index = index\n\n\t\t\t\t\tthis.removePostObj.showConfirmModal = true\n\t\t\t\t} else {\n\t\t\t\t\tthis.axios\n\t\t\t\t\t\t.delete('/api/v1/post/' + this.removePostObj.report.Post.id)\n\t\t\t\t\t\t.then(_ => {\n\t\t\t\t\t\t\treturn this.axios.delete('/api/v1/report/' + this.removePostObj.report.id)\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(_ => {\n\t\t\t\t\t\t\tthis.reports.splice(this.removePostObj.index, 1)\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(AjaxErrorHandler(this.$store))\n\t\t\t\t}\n\t\t\t\n\t\t\t},\n\t\t\tbanUser (report, index) {\n\t\t\t\tthis.$router.push('bans')\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.$store.commit('moderation/setModal', true)\n\t\t\t\t\tthis.$store.commit('moderation/setUsername', report.Post.User.username)\n\t\t\t\t}, 0)\n\t\t\t}\n\t\t},\n\t\tmounted () {\n\t\t\tthis.$store.dispatch('setTitle', 'admin | moderation')\n\n\t\t\tthis.axios\n\t\t\t\t.get('/api/v1/report')\n\t\t\t\t.then(res => {\n\t\t\t\t\tthis.reports = res.data\n\t\t\t\t})\n\t\t\t\t.catch(AjaxErrorHandler(this.$store))\n\t\t}\n\t}\n</script>\n\n<style lang='scss' scoped>\n\t@import '../../assets/scss/variables.scss';\n\n\t.admin_moderation {\n\t\tpadding: 2rem;\n\t\tpadding-top: 1rem;\n\n\t\t@at-root #{&}__reports {\n\t\t\tmargin-top: 1rem;\n\t\t\tborder: thin solid $color__gray--darker;\n\n\t\t\tborder-radius: 0.25rem;\n\t\t\t&> :first-child {\n\t\t\t\tborder-radius: 0.25rem 0.25rem 0 0;\n\t\t\t}\n\t\t\t&> :last-child {\n\t\t\t\tborder-radius: 0 0 0.25rem 0.25rem;\n\t\t\t}\n\t\t}\n\n\t\t@at-root #{&}__report {\n\t\t\tdisplay: flex;\n\t\t\tbackground-color: #fff;\n\t\t\tborder-bottom: thin solid $color__lightgray--darkest;\n\t\t\tpadding: 0.5rem;\n\n\n\t\t\t@at-root #{&}--header {\n\t\t\t\tfont-weight: bold;\n\t\t\t}\n\t\t\t@at-root #{&}--cell_border {\n\t\t\t\tpadding-right: 0.5rem;\n\t\t\t\tmargin-right: 0.5rem;\n\t\t\t\tborder-right: thin solid $color__lightgray--darkest;\n\n\t\t\t\t@at-root #{&}-hidden {\n\t\t\t\t\tborder-right-color: transparent;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t@at-root #{&}__post {\n\t\t\t\twidth: 35%;\n\t\t\t\tdisplay: flex;\n\n\t\t\t\t@at-root #{&}__header {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tjustify-content: space-between;\n\t\t\t\t\tborder-right: thin solid $color__lightgray--darker;\n\t\t\t\t\tpadding-right: 0.25rem;\n\t\t\t\t}\n\t\t\t\t@at-root #{&}__thread {\n\t\t\t\t\tfont-size: 1rem;\n\t\t\t\t\ttext-decoration: underline;\n\t\t\n\t\t\t\t}\n\t\t\t\t@at-root #{&}__content {\n\t\t\t\t\tpadding-left: 0.25rem;\n\t\t\t\t}\n\t\t\t}\n\t\t\t@at-root #{&}__reason {\n\t\t\t\twidth: 15%;\n\t\t\t}\n\t\t\t@at-root #{&}__flagged_by {\n\t\t\t\twidth: 20%;\n\t\t\t\tdisplay: flex;\n\n\t\t\t\n\t\t\t\t@at-root #{&}__text_info {\n\t\t\t\t\tmargin-left: 0.5rem;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tflex-direction: column;\n\t\t\t\t}\n\t\t\t\t@at-root #{&}__date {\n\t\t\t\t\tcolor: $color__darkgray--primary;\n\t\t\t\t}\n\t\t\t}\n\t\t\t@at-root #{&}__actions {\n\t\t\t\twidth: 30%;\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\n\t\t\t\t.button--red {\n\t\t\t\t\tmargin-right: 0.5rem;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\n\t\t@at-root #{&}__header {\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: space-between;\n\t\t\talign-items: center;\n\t\t}\n\t}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminModerationReports.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminModerationReports.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AdminModerationReports.vue?vue&type=template&id=3d5086a3&scoped=true&\"\nimport script from \"./AdminModerationReports.vue?vue&type=script&lang=js&\"\nexport * from \"./AdminModerationReports.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AdminModerationReports.vue?vue&type=style&index=0&id=3d5086a3&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3d5086a3\",\n  null\n  \n)\n\ncomponent.options.__file = \"AdminModerationReports.vue\"\nexport default component.exports"],"sourceRoot":""}