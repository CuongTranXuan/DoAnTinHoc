(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-608b61e0"],{"0a26":function(t,e,s){},"279d":function(t,e,s){},6947:function(t,e,s){"use strict";var a=s("0a26"),r=s.n(a);r.a},"6ba4":function(t,e,s){},7183:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"route_container"},[s("h1",[t._v("Results for "+t._s(t.searchType)+" containing '"+t._s(t.$route.params.q)+"'")]),s("transition",{attrs:{name:"fade",mode:"out-in"}},[t.results&&t.results.length?s("div",{key:"results",staticClass:"search__results"},[s("scroll-load",{attrs:{loading:t.loading},on:{loadNext:t.loadNextPage}},["users"===t.searchType?[t._l(t.results,function(t){return s("user-display",{key:t.id,attrs:{user:t}})}),t._l(t.next,function(e){return t.loading?s("user-placeholder",{key:e}):t._e()})]:t._e(),"threads"===t.searchType?[t._l(t.results,function(t){return s("thread-display",{key:t.id,attrs:{thread:t}})}),t._l(t.next,function(e){return t.loading?s("thread-display-placeholder",{key:e}):t._e()})]:t._e()],2)],1):t._e(),t.showNoResults||t.queryTooShort?s("div",{key:"no results",staticClass:"overlay_message search__overlay_message"},[s("span",{staticClass:"fa fa-exclamation-circle"}),t._v("\n\t\t\t\t"+t._s(t.queryTooShort?"Search term is too short":"No results found")+"\n\t\t")]):s("div",{key:"loading"},["users"===t.searchType?s("user-placeholder"):t._e(),"threads"===t.searchType?s("thread-display-placeholder"):t._e()],1)])],1)},r=[],n=s("2909"),i=(s("7f7f"),s("cadf"),s("551c"),s("097d"),s("8674")),o=s("ac51"),c=s("73b2"),l=s("ce34"),u=s("c4b0"),d=s("bd28"),h={name:"Search",components:{ScrollLoad:i["a"],UserDisplay:o["a"],UserPlaceholder:c["a"],ThreadDisplay:l["a"]},data:function(){return{results:null,next:0,offset:0,loading:!1}},computed:{searchType:function(){var t=this.$route.name;return"search/users"===t?"users":"search/threads"===t?"threads":void 0},showNoResults:function(){return!this.loading&&this.results&&!this.results.length},queryTooShort:function(){return this.$route.params.q.length<4}},methods:{getResults:function(){var t=this;this.queryTooShort||(this.$store.dispatch("setTitle","Search | "+this.$route.params.q),this.axios.get("/api/v1/search/".concat(this.searchType.slice(0,-1),"?q=").concat(this.$route.params.q)).then(function(e){t.results=e.data[t.searchType],t.next=e.data.next,t.offset=e.data.offset}).catch(Object(u["a"])(this.$store)))},loadNextPage:function(){var t=this;this.next&&(this.loading=!0,this.axios.get("/api/v1/search/".concat(this.searchType.slice(0,-1),"?q=").concat(this.$route.params.q,"&offset=").concat(this.offset)).then(function(e){var s;(s=t.results).push.apply(s,Object(n["a"])(e.data[t.searchType])),t.next=e.data.next,t.offset=e.data.offset,t.loading=!1}).catch(function(e){t.loading=!1,Object(u["a"])(t.$store)(e)}))}},watch:{"$route.params":"getResults"},mounted:function(){this.$store.dispatch("setTitle","Search | "+this.$route.params.q),this.getResults(),Object(d["a"])("search")}},f=h,p=(s("6947"),s("2877")),_=Object(p["a"])(f,a,r,!1,null,"ef8fa73e",null);_.options.__file="SearchUsersThreads.vue";e["default"]=_.exports},"73b2":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"user_placeholder"},[s("div",{staticClass:"user_placeholder__avatar"}),s("div",{staticClass:"user_placeholder__username"})])}],n={name:"UserPlaceholder"},i=n,o=(s("a4a1"),s("2877")),c=Object(o["a"])(i,a,r,!1,null,"538c905c",null);c.options.__file="UserPlaceholder.vue";e["a"]=c.exports},"84a2":function(t,e,s){(function(e){var s="Expected a function",a=NaN,r="[object Symbol]",n=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt,u="object"==typeof e&&e&&e.Object===Object&&e,d="object"==typeof self&&self&&self.Object===Object&&self,h=u||d||Function("return this")(),f=Object.prototype,p=f.toString,_=Math.max,v=Math.min,m=function(){return h.Date.now()};function y(t,e,a){var r,n,i,o,c,l,u=0,d=!1,h=!1,f=!0;if("function"!=typeof t)throw new TypeError(s);function p(e){var s=r,a=n;return r=n=void 0,u=e,o=t.apply(a,s),o}function y(t){return u=t,c=setTimeout(C,e),d?p(t):o}function g(t){var s=t-l,a=t-u,r=e-s;return h?v(r,i-a):r}function T(t){var s=t-l,a=t-u;return void 0===l||s>=e||s<0||h&&a>=i}function C(){var t=m();if(T(t))return $(t);c=setTimeout(C,g(t))}function $(t){return c=void 0,f&&r?p(t):(r=n=void 0,o)}function w(){void 0!==c&&clearTimeout(c),u=0,r=l=n=c=void 0}function S(){return void 0===c?o:$(m())}function j(){var t=m(),s=T(t);if(r=arguments,n=this,l=t,s){if(void 0===c)return y(l);if(h)return c=setTimeout(C,e),p(l)}return void 0===c&&(c=setTimeout(C,e)),o}return e=x(e)||0,b(a)&&(d=!!a.leading,h="maxWait"in a,i=h?_(x(a.maxWait)||0,e):i,f="trailing"in a?!!a.trailing:f),j.cancel=w,j.flush=S,j}function g(t,e,a){var r=!0,n=!0;if("function"!=typeof t)throw new TypeError(s);return b(a)&&(r="leading"in a?!!a.leading:r,n="trailing"in a?!!a.trailing:n),y(t,e,{leading:r,maxWait:e,trailing:n})}function b(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function T(t){return!!t&&"object"==typeof t}function C(t){return"symbol"==typeof t||T(t)&&p.call(t)==r}function x(t){if("number"==typeof t)return t;if(C(t))return a;if(b(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=b(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(n,"");var s=o.test(t);return s||c.test(t)?l(t.slice(2),s?2:8):i.test(t)?a:+t}t.exports=g}).call(this,s("c8ba"))},8674:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"scroll_load"},[t._t("default")],2)},r=[],n=s("8e8d"),i=s("84a2"),o=s.n(i),c={name:"ScrollLoad",props:["loading","query-selector","padding-bottom","padding-top"],components:{LoadingButton:n["a"]},computed:{element:function(){return this.querySelector?document.querySelector(this.querySelector):null}},methods:{onScroll:o()(function(t){var e,s,a=this.paddingBottom||300,r=this.paddingTop||150;this.loading||(this.element?(e=Math.floor(this.element.scrollTop+this.element.getBoundingClientRect().height+a-this.element.scrollHeight),s=r-this.element.scrollTop):(e=window.innerHeight+window.pageYOffset+a-document.body.scrollHeight,s=r-document.body.scrollTop),e>0?this.$emit("loadNext"):s>0&&this.$emit("loadPrevious"))})},mounted:function(){(this.element||window).addEventListener("scroll",this.onScroll)},destroyed:function(){(this.element||window).removeEventListener("scroll",this.onScroll)}},l=c,u=s("2877"),d=Object(u["a"])(l,a,r,!1,null,null,null);d.options.__file="ScrollLoad.vue";e["a"]=d.exports},"90f5":function(t,e,s){"use strict";var a=s("6ba4"),r=s.n(a);r.a},a4a1:function(t,e,s){"use strict";var a=s("ab28"),r=s.n(a);r.a},ab28:function(t,e,s){},ac51:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"user_display",on:{click:function(e){t.$router.push("/user/"+t.user.username)}}},[s("avatar-icon",{attrs:{user:t.user,size:"small"}}),s("div",{staticClass:"user_display__username"},[t._v("\n\t\t"+t._s(t.user.username)+"\n\t")])],1)},r=[],n=s("9098"),i={name:"UserDisplay",props:["user"],components:{AvatarIcon:n["a"]}},o=i,c=(s("90f5"),s("2877")),l=Object(c["a"])(o,a,r,!1,null,"cb3c8d9a",null);l.options.__file="UserDisplay.vue";e["a"]=l.exports},bd28:function(t,e,s){"use strict";var a=s("bc3a"),r=s.n(a);e["a"]=function(t,e){"userPosts"===t||"userThreads"===t?r.a.get("/api/v1/user/"+e).then(function(e){return r.a.post("/api/v1/log",{route:t,resourceId:e.data.id})}).catch(console.log):r.a.post("/api/v1/log",{route:t,resourceId:e}).catch(console.log)}},ce34:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"thread_display"},[s("avatar-icon",{ref:"avatar",staticClass:"thread_display__icon",attrs:{user:t.thread.User,size:"small"},on:{click:t.goToUser}}),s("div",{staticStyle:{width:"100%"},on:{click:t.goToThread}},[s("div",{staticClass:"thread_display__header"},[s("span",{staticClass:"thread_display__name"},[t._v("\n\t\t\t\t"+t._s(t.thread.name)+"\n\t\t\t")]),s("div",{staticClass:"thread_display__meta_bar"},[s("div",[t._v("\n\t\t\t\t\tBy\n\t\t\t\t\t"),s("span",{ref:"username",staticClass:"thread_display__username"},[t._v(t._s(t.threadUsername))]),t._v("\n\t\t\t\t\tin\n\t\t\t\t\t"),s("span",{ref:"category",staticClass:"thread_display__category"},[t._v(t._s(t.thread.Category.name))]),t._v("\n\t\t\t\t\t·\n\t\t\t\t\t"),s("span",{staticClass:"thread_display__date"},[t._v(t._s(t._f("formatDate")(t.thread.createdAt)))])])])]),s("div",{staticClass:"thread_display__replies_bar"},[2===t.thread.Posts.length?s("div",{staticClass:"thread_display__latest_reply"},[s("span",{staticClass:"fa fa-reply fa-fw"}),s("span",{staticClass:"thread_display__latest_reply__text"},[t._v("Latest reply by")]),s("span",{staticClass:"thread_display__username"},[t._v(t._s(t.replyUsername))]),t._v("\n\t\t\t\t·\n\t\t\t\t"),s("span",{staticClass:"thread_display__date"},[t._v(t._s(t._f("formatDate")(t.thread.Posts[1].createdAt)))])]):s("span",{staticStyle:{cursor:"default"}},[t._v("No replies")]),s("div",{staticClass:"thread_display__replies",attrs:{title:"Replies to thread"}},[s("span",{staticClass:"fa fa-comment-o fa-fw"}),t._v("\n\t\t\t\t"+t._s(t.thread.postsCount-1)+"\n\t\t\t")])]),s("div",{staticClass:"thread_display__content"},[t._v("\n\t\t\t"+t._s(t._f("truncate")(t._f("stripTags")(t.thread.Posts[0].content),150))+"\n\t\t")])])],1)},r=[],n=s("9098"),i={name:"ThreadDisplay",props:["thread"],components:{AvatarIcon:n["a"]},computed:{threadUsername:function(){return this.thread.User?this.thread.User.username:"[deleted]"},replyUsername:function(){return this.thread.Posts[1].User?this.thread.Posts[1].User.username:"[deleted]"}},methods:{goToUser:function(){this.$router.push("/user/"+this.thread.User.username)},goToThread:function(){this.$router.push("/thread/"+this.thread.slug+"/"+this.thread.id)}}},o=i,c=(s("db0b"),s("2877")),l=Object(c["a"])(o,a,r,!1,null,"c50f8b6c",null);l.options.__file="ThreadDisplay.vue";e["a"]=l.exports},db0b:function(t,e,s){"use strict";var a=s("279d"),r=s.n(a);r.a}}]);
//# sourceMappingURL=chunk-608b61e0.43b2b004.js.map