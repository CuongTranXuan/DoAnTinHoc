(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-424cba3b"],{"0028":function(t,e,s){},"06bf":function(t,e,s){"use strict";var a=s("0028"),n=s.n(a);n.a},2471:function(t,e,s){},"279d":function(t,e,s){},5016:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("menu-tooltip",{staticClass:"select_button",class:{"select_button--touch":!t.touchDisabled},model:{value:t.menuOpen,callback:function(e){t.menuOpen=e},expression:"menuOpen"}},[s("template",{slot:"button"},[t.options.length?s("div",{staticClass:"button button--thin_text",class:{"select_button__button--selected":t.menuOpen},on:{click:function(e){t.menuOpen=!0}}},[t._v("\n\t\t\t"+t._s(t.options[t.selectedIndex].name)+"\n\t\t\t"),s("span",{staticClass:"button__icon select_button__icon fa fa-fw fa-chevron-down"})]):s("div",{staticClass:"button"},[t._v("\n\t\t\tNo options\n\t\t")])]),s("template",{slot:"menu"},t._l(t.options,function(e,a){return s("div",{staticClass:"select_button__option",class:{"select_button__option--disabled":e.disabled,"select_button__option--selected":a===t.selectedIndex&&!e.disabled},on:{click:function(s){t.select(a,e.disabled)}}},[t._v("\n\t\t\t"+t._s(e.name)+"\n\t\t")])}),0)],2)},n=[],i=(s("ac6a"),s("6fab")),o={name:"SelectButton",props:["options","value","name","touch-disabled"],components:{MenuTooltip:i["a"]},methods:{select:function(t,e){e||(this.selectedIndex=t,this.menuOpen=!1,this.$emit("input",this.options[t].value))},getIndexFromValue:function(){var t=0,e=this;return null!==this.value&&this.options.forEach(function(s,a){s.value===e.value&&(t=a)}),t}},data:function(){return{selectedIndex:this.getIndexFromValue(),menuOpen:!1}},watch:{value:function(){this.selectedIndex=this.getIndexFromValue()}}},r=o,l=(s("ee60"),s("2877")),c=Object(l["a"])(r,a,n,!1,null,"3a8a48fc",null);c.options.__file="SelectButton.vue";e["a"]=c.exports},"508c":function(t,e,s){},"6e0b":function(t,e,s){"use strict";var a=s("c89d"),n=s.n(a);n.a},"6fab":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"menu_tooltip",class:{"menu_tooltip--touch":!t.touchDisabled}},[s("div",{staticClass:"menu_tooltip__overlay",class:{"menu_tooltip__overlay--show":t.value},on:{click:function(e){t.$emit("input",!1)}}}),t._t("button"),s("div",{staticClass:"menu_tooltip__menu",class:{"menu_tooltip__menu--show":t.value},style:{top:t.top,width:t.width}},[s("div",{staticClass:"menu_tooltip__menu__inner"},[t._t("menu")],2)])],2)},n=[],i=(s("cadf"),s("551c"),s("097d"),{name:"MenuTooltip",props:["value","top","width","touch-disabled"]}),o=i,r=(s("6e0b"),s("2877")),l=Object(r["a"])(o,a,n,!1,null,"5bd61e2c",null);l.options.__file="MenuTooltip.vue";e["a"]=l.exports},"832c":function(t,e,s){"use strict";var a=s("2471"),n=s.n(a);n.a},"84a2":function(t,e,s){(function(e){var s="Expected a function",a=NaN,n="[object Symbol]",i=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt,d="object"==typeof e&&e&&e.Object===Object&&e,u="object"==typeof self&&self&&self.Object===Object&&self,h=d||u||Function("return this")(),_=Object.prototype,p=_.toString,f=Math.max,v=Math.min,m=function(){return h.Date.now()};function g(t,e,a){var n,i,o,r,l,c,d=0,u=!1,h=!1,_=!0;if("function"!=typeof t)throw new TypeError(s);function p(e){var s=n,a=i;return n=i=void 0,d=e,r=t.apply(a,s),r}function g(t){return d=t,l=setTimeout(T,e),u?p(t):r}function y(t){var s=t-c,a=t-d,n=e-s;return h?v(n,o-a):n}function C(t){var s=t-c,a=t-d;return void 0===c||s>=e||s<0||h&&a>=o}function T(){var t=m();if(C(t))return x(t);l=setTimeout(T,y(t))}function x(t){return l=void 0,_&&n?p(t):(n=i=void 0,r)}function O(){void 0!==l&&clearTimeout(l),d=0,n=c=i=l=void 0}function $(){return void 0===l?r:x(m())}function k(){var t=m(),s=C(t);if(n=arguments,i=this,c=t,s){if(void 0===l)return g(c);if(h)return l=setTimeout(T,e),p(c)}return void 0===l&&(l=setTimeout(T,e)),r}return e=w(e)||0,b(a)&&(u=!!a.leading,h="maxWait"in a,o=h?f(w(a.maxWait)||0,e):o,_="trailing"in a?!!a.trailing:_),k.cancel=O,k.flush=$,k}function y(t,e,a){var n=!0,i=!0;if("function"!=typeof t)throw new TypeError(s);return b(a)&&(n="leading"in a?!!a.leading:n,i="trailing"in a?!!a.trailing:i),g(t,e,{leading:n,maxWait:e,trailing:i})}function b(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function C(t){return!!t&&"object"==typeof t}function T(t){return"symbol"==typeof t||C(t)&&p.call(t)==n}function w(t){if("number"==typeof t)return t;if(T(t))return a;if(b(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=b(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(i,"");var s=r.test(t);return s||l.test(t)?c(t.slice(2),s?2:8):o.test(t)?a:+t}t.exports=y}).call(this,s("c8ba"))},8674:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"scroll_load"},[t._t("default")],2)},n=[],i=s("8e8d"),o=s("84a2"),r=s.n(o),l={name:"ScrollLoad",props:["loading","query-selector","padding-bottom","padding-top"],components:{LoadingButton:i["a"]},computed:{element:function(){return this.querySelector?document.querySelector(this.querySelector):null}},methods:{onScroll:r()(function(t){var e,s,a=this.paddingBottom||300,n=this.paddingTop||150;this.loading||(this.element?(e=Math.floor(this.element.scrollTop+this.element.getBoundingClientRect().height+a-this.element.scrollHeight),s=n-this.element.scrollTop):(e=window.innerHeight+window.pageYOffset+a-document.body.scrollHeight,s=n-document.body.scrollTop),e>0?this.$emit("loadNext"):s>0&&this.$emit("loadPrevious"))})},mounted:function(){(this.element||window).addEventListener("scroll",this.onScroll)},destroyed:function(){(this.element||window).removeEventListener("scroll",this.onScroll)}},c=l,d=s("2877"),u=Object(d["a"])(c,a,n,!1,null,null,null);u.options.__file="ScrollLoad.vue";e["a"]=u.exports},"9c38":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"route_container"},[t.$store.state.meta.showDescription&&t.$store.state.meta.description?s("div",{staticClass:"forum_description"},[t._v("\n\t\t"+t._s(t.$store.state.meta.description)+"\n\t")]):t._e(),s("div",{staticClass:"thread_sorting"},[s("select-options",{staticClass:"thread_sorting__filter",attrs:{options:t.filterOptions},model:{value:t.selectedFilterOption,callback:function(e){t.selectedFilterOption=e},expression:"selectedFilterOption"}}),s("div",{staticClass:"thread_sorting__add_and_categories"},[s("select-button",{attrs:{options:t.categories},model:{value:t.selectedCategory,callback:function(e){t.selectedCategory=e},expression:"selectedCategory"}}),s("router-link",{staticClass:"button button--blue",attrs:{to:"/thread/new"}},[t._v("\n\t\t\t\t"+t._s(t.postNewThreadText)+"\n\t\t\t")])],1)],1),s("div",{staticClass:"threads_main"},[s("div",{staticClass:"threads_main__side_bar"},[s("div",{staticClass:"threads_main__side_bar__title"},[t._v("\n\t\t\t\tcategories\n\t\t\t")]),t._l(t.categories,function(e){return s("router-link",{key:e.value,staticClass:"threads_main__side_bar__menu_item",class:{"threads_main__side_bar__menu_item--selected":e.value===t.selectedCategory},attrs:{to:"/category/"+e.value}},[s("span",{staticClass:"threads_main__side_bar__menu_item__border",style:{"background-color":e.color}}),s("span",{staticClass:"threads_main__side_bar__menu_item__text",style:{color:e.value===t.selectedCategory?e.color:void 0}},[t._v(t._s(e.name))])])})],2),s("transition",{attrs:{name:"fade",mode:"out-in"}},[t.threads?t.filteredThreads.length?s("scroll-load",{key:"threads",staticClass:"threads_main__threads",attrs:{loading:t.loading},on:{loadNext:t.getThreads}},[t._l(t.newThreads,function(e){return t.loadingNewer?s("thread-display-placeholder",{key:e}):t._e()}),t.newThreads?s("div",{staticClass:"threads_main__load_new",on:{click:t.getNewerThreads}},[t._v("\n\t\t\t\t\tLoad "+t._s(t.newThreads)+" new "+t._s(t._f("pluralize")(t.newThreads,"thread")))]):t._e(),t._l(t.filteredThreads,function(t){return s("thread-display",{key:t.id,attrs:{thread:t}})}),t._l(t.nextThreadsCount,function(e){return t.loading?s("thread-display-placeholder",{key:e}):t._e()})],2):s("div",{key:"no threads",staticClass:"threads_main__threads overlay_message"},[s("span",{staticClass:"fa fa-exclamation-circle"}),t._v("\n\t\t\t\tNo threads or posts.\n\t\t\t")]):s("div",{key:"loading",staticClass:"threads_main__threads"},[s("thread-display-placeholder")],1)],1)],1)])},n=[],i=(s("28a5"),s("2909")),o=(s("7514"),s("f751"),s("55dd"),s("7f7f"),s("ac6a"),s("6334")),r=s("8674"),l=s("ce34"),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"select_options"},t._l(t.options,function(e){return s("button",{staticClass:"button button--thin_text",class:{"button--lightblue":e.value===t.value},on:{click:function(s){t.select(e.value)}}},[t._v("\n\t\t"+t._s(e.name)+"\n\t")])}),0)},d=[],u={name:"SelectOptions",props:["value","options"],methods:{select:function(t){this.$emit("input",t)}}},h=u,_=(s("06bf"),s("2877")),p=Object(_["a"])(h,c,d,!1,null,"492ce6f2",null);p.options.__file="SelectOptions.vue";var f=p.exports,v=s("5016"),m=s("c4b0"),g=s("bd28"),y={name:"index",components:{TabView:o["a"],ScrollLoad:r["a"],ThreadDisplay:l["a"],SelectOptions:f,SelectButton:v["a"]},data:function(){return{filterOptions:[{name:"New",value:"NEW"},{name:"Most active",value:"MOST_ACTIVE"},{name:"No replies",value:"NO_REPLIES"}],selectedFilterOption:"NEW",nextURL:"",nextThreadsCount:0,loading:!1,threads:null,newThreads:0,loadingNewer:!1}},computed:{filteredThreads:function(){var t=this,e={},s=this.selectedFilterOption;return this.$store.state.meta.categories.forEach(function(t){e[t.value]=t.name}),this.threads.filter(function(e){return e.Category.value===t.selectedCategory||"ALL"===t.selectedCategory}).map(function(t){var s=Object.assign({},t);return s.category=e[t.Category.value],s}).sort(function(t,e){if("NEW"===s){var a=new Date(t.Posts[0].createdAt),n=new Date(e.Posts[0].createdAt);return n-a}if("MOST_ACTIVE"===s)return e.postsCount-t.postsCount}).filter(function(t){return!("NO_REPLIES"===s&&t.postsCount-1)})},categories:function(){return this.$store.getters.alphabetizedCategories},selectedCategory:{set:function(t){var e=this.categories.find(function(e){return e.value===t});this.$store.dispatch("setTitle",e?e.name:""),this.$store.commit("setSelectedCategory",t)},get:function(){return this.$store.state.category.selectedCategory}},postNewThreadText:function(){return this.$store.state.username?"Post new thread":"Login to post"}},methods:{navigateToThread:function(t,e){this.$router.push("/thread/"+t+"/"+e)},getThreads:function(t){var e=this;if(null!==this.nextURL||t){var s="/api/v1/category/"+this.selectedCategory;t||(s=this.nextURL||s),this.loading=!0,this.axios.get(s).then(function(s){var a;(e.loading=!1,t)?e.threads=s.data.Threads:(a=e.threads).push.apply(a,Object(i["a"])(s.data.Threads));e.nextURL=s.data.meta.nextURL,e.nextThreadsCount=s.data.meta.nextThreadsCount}).catch(function(t){e.loading=!1,Object(m["a"])(e.$store)(t)})}},getNewerThreads:function(){var t=this;this.loadingNewer=!0,this.axios.get("/api/v1/category/"+this.selectedCategory+"?limit="+this.newThreads).then(function(e){var s;t.loadingNewer=!1,t.newThreads=0,(s=t.threads).unshift.apply(s,Object(i["a"])(e.data.Threads))}).catch(function(e){t.loadingNewer=!1,Object(m["a"])(t.$store)(e)})}},watch:{selectedCategory:function(t){this.$router.push("/category/"+t.toLowerCase())},$route:function(){this.selectedCategory=this.$route.path.split("/")[2].toUpperCase(),this.newThreads=0,this.getThreads(!0)}},created:function(){var t=this;this.selectedCategory=this.$route.path.split("/")[2].toUpperCase(),this.getThreads(!0),socket.emit("join","index"),socket.on("new thread",function(e){e.value!==t.selectedCategory&&"ALL"!=t.selectedCategory||t.newThreads++}),this.$route.query.token&&(this.$store.commit("setToken",this.$route.query.token),this.$store.commit("setAccountTabs",0),this.$store.commit("setAccountModalState",!0)),Object(g["a"])("index")},destroyed:function(){socket.emit("leave","index"),socket.off("new thread")}},b=y,C=(s("832c"),Object(_["a"])(b,a,n,!1,null,"6f08bfcb",null));C.options.__file="Index.vue";e["default"]=C.exports},bd28:function(t,e,s){"use strict";var a=s("bc3a"),n=s.n(a);e["a"]=function(t,e){"userPosts"===t||"userThreads"===t?n.a.get("/api/v1/user/"+e).then(function(e){return n.a.post("/api/v1/log",{route:t,resourceId:e.data.id})}).catch(console.log):n.a.post("/api/v1/log",{route:t,resourceId:e}).catch(console.log)}},c89d:function(t,e,s){},ce34:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"thread_display"},[s("avatar-icon",{ref:"avatar",staticClass:"thread_display__icon",attrs:{user:t.thread.User,size:"small"},on:{click:t.goToUser}}),s("div",{staticStyle:{width:"100%"},on:{click:t.goToThread}},[s("div",{staticClass:"thread_display__header"},[s("span",{staticClass:"thread_display__name"},[t._v("\n\t\t\t\t"+t._s(t.thread.name)+"\n\t\t\t")]),s("div",{staticClass:"thread_display__meta_bar"},[s("div",[t._v("\n\t\t\t\t\tBy\n\t\t\t\t\t"),s("span",{ref:"username",staticClass:"thread_display__username"},[t._v(t._s(t.threadUsername))]),t._v("\n\t\t\t\t\tin\n\t\t\t\t\t"),s("span",{ref:"category",staticClass:"thread_display__category"},[t._v(t._s(t.thread.Category.name))]),t._v("\n\t\t\t\t\t·\n\t\t\t\t\t"),s("span",{staticClass:"thread_display__date"},[t._v(t._s(t._f("formatDate")(t.thread.createdAt)))])])])]),s("div",{staticClass:"thread_display__replies_bar"},[2===t.thread.Posts.length?s("div",{staticClass:"thread_display__latest_reply"},[s("span",{staticClass:"fa fa-reply fa-fw"}),s("span",{staticClass:"thread_display__latest_reply__text"},[t._v("Latest reply by")]),s("span",{staticClass:"thread_display__username"},[t._v(t._s(t.replyUsername))]),t._v("\n\t\t\t\t·\n\t\t\t\t"),s("span",{staticClass:"thread_display__date"},[t._v(t._s(t._f("formatDate")(t.thread.Posts[1].createdAt)))])]):s("span",{staticStyle:{cursor:"default"}},[t._v("No replies")]),s("div",{staticClass:"thread_display__replies",attrs:{title:"Replies to thread"}},[s("span",{staticClass:"fa fa-comment-o fa-fw"}),t._v("\n\t\t\t\t"+t._s(t.thread.postsCount-1)+"\n\t\t\t")])]),s("div",{staticClass:"thread_display__content"},[t._v("\n\t\t\t"+t._s(t._f("truncate")(t._f("stripTags")(t.thread.Posts[0].content),150))+"\n\t\t")])])],1)},n=[],i=s("9098"),o={name:"ThreadDisplay",props:["thread"],components:{AvatarIcon:i["a"]},computed:{threadUsername:function(){return this.thread.User?this.thread.User.username:"[deleted]"},replyUsername:function(){return this.thread.Posts[1].User?this.thread.Posts[1].User.username:"[deleted]"}},methods:{goToUser:function(){this.$router.push("/user/"+this.thread.User.username)},goToThread:function(){this.$router.push("/thread/"+this.thread.slug+"/"+this.thread.id)}}},r=o,l=(s("db0b"),s("2877")),c=Object(l["a"])(r,a,n,!1,null,"c50f8b6c",null);c.options.__file="ThreadDisplay.vue";e["a"]=c.exports},db0b:function(t,e,s){"use strict";var a=s("279d"),n=s.n(a);n.a},ee60:function(t,e,s){"use strict";var a=s("508c"),n=s.n(a);n.a}}]);
//# sourceMappingURL=chunk-424cba3b.e4c8e6cf.js.map