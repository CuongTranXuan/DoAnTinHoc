(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cb409cbe"],{"0028":function(t,e,a){},"0352":function(t,e,a){},"037a":function(t,e,a){"use strict";var s=a("28b1"),n=a.n(s);n.a},"06bf":function(t,e,a){"use strict";var s=a("0028"),n=a.n(s);n.a},"279d":function(t,e,a){},"28b1":function(t,e,a){},5016:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("menu-tooltip",{staticClass:"select_button",class:{"select_button--touch":!t.touchDisabled},model:{value:t.menuOpen,callback:function(e){t.menuOpen=e},expression:"menuOpen"}},[a("template",{slot:"button"},[t.options.length?a("div",{staticClass:"button button--thin_text",class:{"select_button__button--selected":t.menuOpen},on:{click:function(e){t.menuOpen=!0}}},[t._v("\n\t\t\t"+t._s(t.options[t.selectedIndex].name)+"\n\t\t\t"),a("span",{staticClass:"button__icon select_button__icon fa fa-fw fa-chevron-down"})]):a("div",{staticClass:"button"},[t._v("\n\t\t\tNo options\n\t\t")])]),a("template",{slot:"menu"},t._l(t.options,function(e,s){return a("div",{staticClass:"select_button__option",class:{"select_button__option--disabled":e.disabled,"select_button__option--selected":s===t.selectedIndex&&!e.disabled},on:{click:function(a){t.select(s,e.disabled)}}},[t._v("\n\t\t\t"+t._s(e.name)+"\n\t\t")])}),0)],2)},n=[],i=(a("ac6a"),a("6fab")),r={name:"SelectButton",props:["options","value","name","touch-disabled"],components:{MenuTooltip:i["a"]},methods:{select:function(t,e){e||(this.selectedIndex=t,this.menuOpen=!1,this.$emit("input",this.options[t].value))},getIndexFromValue:function(){var t=0,e=this;return null!==this.value&&this.options.forEach(function(a,s){a.value===e.value&&(t=s)}),t}},data:function(){return{selectedIndex:this.getIndexFromValue(),menuOpen:!1}},watch:{value:function(){this.selectedIndex=this.getIndexFromValue()}}},o=r,l=(a("ee60"),a("2877")),c=Object(l["a"])(o,s,n,!1,null,"3a8a48fc",null);c.options.__file="SelectButton.vue";e["a"]=c.exports},"508c":function(t,e,a){},"6e0b":function(t,e,a){"use strict";var s=a("c89d"),n=a.n(s);n.a},"6fab":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"menu_tooltip",class:{"menu_tooltip--touch":!t.touchDisabled}},[a("div",{staticClass:"menu_tooltip__overlay",class:{"menu_tooltip__overlay--show":t.value},on:{click:function(e){t.$emit("input",!1)}}}),t._t("button"),a("div",{staticClass:"menu_tooltip__menu",class:{"menu_tooltip__menu--show":t.value},style:{top:t.top,width:t.width}},[a("div",{staticClass:"menu_tooltip__menu__inner"},[t._t("menu")],2)])],2)},n=[],i={name:"MenuTooltip",props:["value","top","width","touch-disabled"]},r=i,o=(a("6e0b"),a("2877")),l=Object(o["a"])(r,s,n,!1,null,"5bd61e2c",null);l.options.__file="MenuTooltip.vue";e["a"]=l.exports},"84a2":function(t,e,a){(function(e){var a="Expected a function",s=NaN,n="[object Symbol]",i=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt,d="object"==typeof e&&e&&e.Object===Object&&e,u="object"==typeof self&&self&&self.Object===Object&&self,_=d||u||Function("return this")(),h=Object.prototype,p=h.toString,f=Math.max,v=Math.min,m=function(){return _.Date.now()};function y(t,e,s){var n,i,r,o,l,c,d=0,u=!1,_=!1,h=!0;if("function"!=typeof t)throw new TypeError(a);function p(e){var a=n,s=i;return n=i=void 0,d=e,o=t.apply(s,a),o}function y(t){return d=t,l=setTimeout(T,e),u?p(t):o}function b(t){var a=t-c,s=t-d,n=e-a;return _?v(n,r-s):n}function C(t){var a=t-c,s=t-d;return void 0===c||a>=e||a<0||_&&s>=r}function T(){var t=m();if(C(t))return x(t);l=setTimeout(T,b(t))}function x(t){return l=void 0,h&&n?p(t):(n=i=void 0,o)}function O(){void 0!==l&&clearTimeout(l),d=0,n=c=i=l=void 0}function $(){return void 0===l?o:x(m())}function k(){var t=m(),a=C(t);if(n=arguments,i=this,c=t,a){if(void 0===l)return y(c);if(_)return l=setTimeout(T,e),p(c)}return void 0===l&&(l=setTimeout(T,e)),o}return e=w(e)||0,g(s)&&(u=!!s.leading,_="maxWait"in s,r=_?f(w(s.maxWait)||0,e):r,h="trailing"in s?!!s.trailing:h),k.cancel=O,k.flush=$,k}function b(t,e,s){var n=!0,i=!0;if("function"!=typeof t)throw new TypeError(a);return g(s)&&(n="leading"in s?!!s.leading:n,i="trailing"in s?!!s.trailing:i),y(t,e,{leading:n,maxWait:e,trailing:i})}function g(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function C(t){return!!t&&"object"==typeof t}function T(t){return"symbol"==typeof t||C(t)&&p.call(t)==n}function w(t){if("number"==typeof t)return t;if(T(t))return s;if(g(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=g(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(i,"");var a=o.test(t);return a||l.test(t)?c(t.slice(2),a?2:8):r.test(t)?s:+t}t.exports=b}).call(this,a("c8ba"))},8674:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"scroll_load"},[t._t("default")],2)},n=[],i=a("8e8d"),r=a("84a2"),o=a.n(r),l={name:"ScrollLoad",props:["loading","query-selector","padding-bottom","padding-top"],components:{LoadingButton:i["a"]},computed:{element:function(){return this.querySelector?document.querySelector(this.querySelector):null}},methods:{onScroll:o()(function(t){var e,a,s=this.paddingBottom||300,n=this.paddingTop||150;this.loading||(this.element?(e=Math.floor(this.element.scrollTop+this.element.getBoundingClientRect().height+s-this.element.scrollHeight),a=n-this.element.scrollTop):(e=window.innerHeight+window.pageYOffset+s-document.body.scrollHeight,a=n-document.body.scrollTop),e>0?this.$emit("loadNext"):a>0&&this.$emit("loadPrevious"))})},mounted:function(){(this.element||window).addEventListener("scroll",this.onScroll)},destroyed:function(){(this.element||window).removeEventListener("scroll",this.onScroll)}},c=l,d=a("2877"),u=Object(d["a"])(c,s,n,!1,null,null,null);u.options.__file="ScrollLoad.vue";e["a"]=u.exports},9870:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"thread_display_placeholder"},[a("div",{staticClass:"thread_display_placeholder__icon"}),a("div",{staticStyle:{width:"100%"}},[a("div",{staticClass:"thread_display_placeholder__header"},[a("div",{staticClass:"thread_display_placeholder__bar thread_display_placeholder__bar--15"}),a("div",{staticClass:"thread_display_placeholder__bar thread_display_placeholder__bar--33"})]),a("div",{staticClass:"thread_display_placeholder__replies_bar"},[a("div",{staticClass:"thread_display_placeholder__bar thread_display_placeholder__bar--20"}),a("div",{staticClass:"thread_display_placeholder__bar thread_display_placeholder__bar--5"})]),a("div",{staticClass:"thread_display_placeholder__content"},[a("div",{staticClass:"thread_display_placeholder__bar"}),a("div",{staticClass:"thread_display_placeholder__bar thread_display_placeholder__bar--58"})])])])}],i={name:"ThreadDisplayPlaceholder"},r=i,o=(a("ad2c"),a("2877")),l=Object(o["a"])(r,s,n,!1,null,"3ef4b836",null);l.options.__file="ThreadDisplayPlaceholder.vue";e["a"]=l.exports},"9c38":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"route_container"},[t.$store.state.meta.showDescription&&t.$store.state.meta.description?a("div",{staticClass:"forum_description"},[t._v("\n\t\t"+t._s(t.$store.state.meta.description)+"\n\t")]):t._e(),a("div",{staticClass:"thread_sorting"},[a("select-options",{staticClass:"thread_sorting__filter",attrs:{options:t.filterOptions},model:{value:t.selectedFilterOption,callback:function(e){t.selectedFilterOption=e},expression:"selectedFilterOption"}}),a("div",{staticClass:"thread_sorting__add_and_categories"},[a("select-button",{attrs:{options:t.categories},model:{value:t.selectedCategory,callback:function(e){t.selectedCategory=e},expression:"selectedCategory"}}),a("router-link",{staticClass:"button button--blue",attrs:{to:"/thread/new"}},[t._v("\n\t\t\t\t"+t._s(t.postNewThreadText)+"\n\t\t\t")])],1)],1),a("div",{staticClass:"threads_main"},[a("div",{staticClass:"threads_main__side_bar"},[a("div",{staticClass:"threads_main__side_bar__title"},[t._v("\n\t\t\t\tcategories\n\t\t\t")]),t._l(t.categories,function(e){return a("router-link",{key:e.value,staticClass:"threads_main__side_bar__menu_item",class:{"threads_main__side_bar__menu_item--selected":e.value===t.selectedCategory},attrs:{to:"/category/"+e.value}},[a("span",{staticClass:"threads_main__side_bar__menu_item__border",style:{"background-color":e.color}}),a("span",{staticClass:"threads_main__side_bar__menu_item__text",style:{color:e.value===t.selectedCategory?e.color:void 0}},[t._v(t._s(e.name))])])})],2),a("transition",{attrs:{name:"fade",mode:"out-in"}},[t.threads?t.filteredThreads.length?a("scroll-load",{key:"threads",staticClass:"threads_main__threads",attrs:{loading:t.loading},on:{loadNext:t.getThreads}},[t._l(t.newThreads,function(e){return t.loadingNewer?a("thread-display-placeholder",{key:e}):t._e()}),t.newThreads?a("div",{staticClass:"threads_main__load_new",on:{click:t.getNewerThreads}},[t._v("\n\t\t\t\t\tLoad "+t._s(t.newThreads)+" new "+t._s(t._f("pluralize")(t.newThreads,"thread")))]):t._e(),t._l(t.filteredThreads,function(t){return a("thread-display",{key:t.id,attrs:{thread:t}})}),t._l(t.nextThreadsCount,function(e){return t.loading?a("thread-display-placeholder",{key:e}):t._e()})],2):a("div",{key:"no threads",staticClass:"threads_main__threads overlay_message"},[a("span",{staticClass:"fa fa-exclamation-circle"}),t._v("\n\t\t\t\tNo threads or posts.\n\t\t\t")]):a("div",{key:"loading",staticClass:"threads_main__threads"},[a("thread-display-placeholder")],1)],1)],1)])},n=[],i=(a("28a5"),a("2909")),r=(a("7514"),a("f751"),a("55dd"),a("7f7f"),a("ac6a"),a("6334")),o=a("8674"),l=a("ce34"),c=a("9870"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"select_options"},t._l(t.options,function(e){return a("button",{staticClass:"button button--thin_text",class:{"button--lightblue":e.value===t.value},on:{click:function(a){t.select(e.value)}}},[t._v("\n\t\t"+t._s(e.name)+"\n\t")])}),0)},u=[],_={name:"SelectOptions",props:["value","options"],methods:{select:function(t){this.$emit("input",t)}}},h=_,p=(a("06bf"),a("2877")),f=Object(p["a"])(h,d,u,!1,null,"492ce6f2",null);f.options.__file="SelectOptions.vue";var v=f.exports,m=a("5016"),y=a("c4b0"),b=a("bd28"),g={name:"index",components:{TabView:r["a"],ScrollLoad:o["a"],ThreadDisplay:l["a"],ThreadDisplayPlaceholder:c["a"],SelectOptions:v,SelectButton:m["a"]},data:function(){return{filterOptions:[{name:"New",value:"NEW"},{name:"Most active",value:"MOST_ACTIVE"},{name:"No replies",value:"NO_REPLIES"}],selectedFilterOption:"NEW",nextURL:"",nextThreadsCount:0,loading:!1,threads:null,newThreads:0,loadingNewer:!1}},computed:{filteredThreads:function(){var t=this,e={},a=this.selectedFilterOption;return this.$store.state.meta.categories.forEach(function(t){e[t.value]=t.name}),this.threads.filter(function(e){return e.Category.value===t.selectedCategory||"ALL"===t.selectedCategory}).map(function(t){var a=Object.assign({},t);return a.category=e[t.Category.value],a}).sort(function(t,e){if("NEW"===a){var s=new Date(t.Posts[0].createdAt),n=new Date(e.Posts[0].createdAt);return n-s}if("MOST_ACTIVE"===a)return e.postsCount-t.postsCount}).filter(function(t){return!("NO_REPLIES"===a&&t.postsCount-1)})},categories:function(){return this.$store.getters.alphabetizedCategories},selectedCategory:{set:function(t){var e=this.categories.find(function(e){return e.value===t});this.$store.dispatch("setTitle",e?e.name:""),this.$store.commit("setSelectedCategory",t)},get:function(){return this.$store.state.category.selectedCategory}},postNewThreadText:function(){return this.$store.state.username?"Post new thread":"Login to post"}},methods:{navigateToThread:function(t,e){this.$router.push("/thread/"+t+"/"+e)},getThreads:function(t){var e=this;if(null!==this.nextURL||t){var a="/api/v1/category/"+this.selectedCategory;t||(a=this.nextURL||a),this.loading=!0,this.axios.get(a).then(function(a){var s;(e.loading=!1,t)?e.threads=a.data.Threads:(s=e.threads).push.apply(s,Object(i["a"])(a.data.Threads));e.nextURL=a.data.meta.nextURL,e.nextThreadsCount=a.data.meta.nextThreadsCount}).catch(function(t){e.loading=!1,Object(y["a"])(e.$store)(t)})}},getNewerThreads:function(){var t=this;this.loadingNewer=!0,this.axios.get("/api/v1/category/"+this.selectedCategory+"?limit="+this.newThreads).then(function(e){var a;t.loadingNewer=!1,t.newThreads=0,(a=t.threads).unshift.apply(a,Object(i["a"])(e.data.Threads))}).catch(function(e){t.loadingNewer=!1,Object(y["a"])(t.$store)(e)})}},watch:{selectedCategory:function(t){this.$router.push("/category/"+t.toLowerCase())},$route:function(){this.selectedCategory=this.$route.path.split("/")[2].toUpperCase(),this.newThreads=0,this.getThreads(!0)}},created:function(){var t=this;this.selectedCategory=this.$route.path.split("/")[2].toUpperCase(),this.getThreads(!0),socket.emit("join","index"),socket.on("new thread",function(e){e.value!==t.selectedCategory&&"ALL"!=t.selectedCategory||t.newThreads++}),this.$route.query.token&&(this.$store.commit("setToken",this.$route.query.token),this.$store.commit("setAccountTabs",0),this.$store.commit("setAccountModalState",!0)),Object(b["a"])("index")},destroyed:function(){socket.emit("leave","index"),socket.off("new thread")}},C=g,T=(a("037a"),Object(p["a"])(C,s,n,!1,null,"c6ee547a",null));T.options.__file="Index.vue";e["default"]=T.exports},ad2c:function(t,e,a){"use strict";var s=a("0352"),n=a.n(s);n.a},bd28:function(t,e,a){"use strict";var s=a("bc3a"),n=a.n(s);e["a"]=function(t,e){"userPosts"===t||"userThreads"===t?n.a.get("/api/v1/user/"+e).then(function(e){return n.a.post("/api/v1/log",{route:t,resourceId:e.data.id})}).catch(console.log):n.a.post("/api/v1/log",{route:t,resourceId:e}).catch(console.log)}},c89d:function(t,e,a){},ce34:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"thread_display"},[a("avatar-icon",{ref:"avatar",staticClass:"thread_display__icon",attrs:{user:t.thread.User,size:"small"},on:{click:t.goToUser}}),a("div",{staticStyle:{width:"100%"},on:{click:t.goToThread}},[a("div",{staticClass:"thread_display__header"},[a("span",{staticClass:"thread_display__name"},[t._v("\n\t\t\t\t"+t._s(t.thread.name)+"\n\t\t\t")]),a("div",{staticClass:"thread_display__meta_bar"},[a("div",[t._v("\n\t\t\t\t\tBy\n\t\t\t\t\t"),a("span",{ref:"username",staticClass:"thread_display__username"},[t._v(t._s(t.threadUsername))]),t._v("\n\t\t\t\t\tin\n\t\t\t\t\t"),a("span",{ref:"category",staticClass:"thread_display__category"},[t._v(t._s(t.thread.Category.name))]),t._v("\n\t\t\t\t\t·\n\t\t\t\t\t"),a("span",{staticClass:"thread_display__date"},[t._v(t._s(t._f("formatDate")(t.thread.createdAt)))])])])]),a("div",{staticClass:"thread_display__replies_bar"},[2===t.thread.Posts.length?a("div",{staticClass:"thread_display__latest_reply"},[a("span",{staticClass:"fa fa-reply fa-fw"}),a("span",{staticClass:"thread_display__latest_reply__text"},[t._v("Latest reply by")]),a("span",{staticClass:"thread_display__username"},[t._v(t._s(t.replyUsername))]),t._v("\n\t\t\t\t·\n\t\t\t\t"),a("span",{staticClass:"thread_display__date"},[t._v(t._s(t._f("formatDate")(t.thread.Posts[1].createdAt)))])]):a("span",{staticStyle:{cursor:"default"}},[t._v("No replies")]),a("div",{staticClass:"thread_display__replies",attrs:{title:"Replies to thread"}},[a("span",{staticClass:"fa fa-comment-o fa-fw"}),t._v("\n\t\t\t\t"+t._s(t.thread.postsCount-1)+"\n\t\t\t")])]),a("div",{staticClass:"thread_display__content"},[t._v("\n\t\t\t"+t._s(t._f("truncate")(t._f("stripTags")(t.thread.Posts[0].content),150))+"\n\t\t")])])],1)},n=[],i=a("9098"),r={name:"ThreadDisplay",props:["thread"],components:{AvatarIcon:i["a"]},computed:{threadUsername:function(){return this.thread.User?this.thread.User.username:"[deleted]"},replyUsername:function(){return this.thread.Posts[1].User?this.thread.Posts[1].User.username:"[deleted]"}},methods:{goToUser:function(){this.$router.push("/user/"+this.thread.User.username)},goToThread:function(){this.$router.push("/thread/"+this.thread.slug+"/"+this.thread.id)}}},o=r,l=(a("db0b"),a("2877")),c=Object(l["a"])(o,s,n,!1,null,"c50f8b6c",null);c.options.__file="ThreadDisplay.vue";e["a"]=c.exports},db0b:function(t,e,a){"use strict";var s=a("279d"),n=a.n(s);n.a},ee60:function(t,e,a){"use strict";var s=a("508c"),n=a.n(s);n.a}}]);
//# sourceMappingURL=chunk-cb409cbe.834656d1.js.map