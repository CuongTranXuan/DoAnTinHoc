(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-71fc20bf"],{"45a3":function(t,e,n){},"4f7f":function(t,e,n){"use strict";var r=n("c26b"),o=n("b39a"),i="Set";t.exports=n("e0b8")(i,function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return r.def(o(this,i),t=0===t?0:t,t)}},r)},"67ab":function(t,e,n){var r=n("ca5a")("meta"),o=n("d3f4"),i=n("69a8"),s=n("86cc").f,a=0,c=Object.isExtensible||function(){return!0},u=!n("79e5")(function(){return c(Object.preventExtensions({}))}),f=function(t){s(t,r,{value:{i:"O"+ ++a,w:{}}})},l=function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,r)){if(!c(t))return"F";if(!e)return"E";f(t)}return t[r].i},d=function(t,e){if(!i(t,r)){if(!c(t))return!0;if(!e)return!1;f(t)}return t[r].w},h=function(t){return u&&v.NEED&&c(t)&&!i(t,r)&&f(t),t},v=t.exports={KEY:r,NEED:!1,fastKey:l,getWeak:d,onFreeze:h}},b39a:function(t,e,n){var r=n("d3f4");t.exports=function(t,e){if(!r(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},c26b:function(t,e,n){"use strict";var r=n("86cc").f,o=n("2aeb"),i=n("dcbc"),s=n("9b43"),a=n("f605"),c=n("4a59"),u=n("01f9"),f=n("d53b"),l=n("7a56"),d=n("9e1e"),h=n("67ab").fastKey,v=n("b39a"),p=d?"_s":"size",m=function(t,e){var n,r=h(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,u){var f=t(function(t,r){a(t,f,e,"_i"),t._t=e,t._i=o(null),t._f=void 0,t._l=void 0,t[p]=0,void 0!=r&&c(r,n,t[u],t)});return i(f.prototype,{clear:function(){for(var t=v(this,e),n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[p]=0},delete:function(t){var n=v(this,e),r=m(n,t);if(r){var o=r.n,i=r.p;delete n._i[r.i],r.r=!0,i&&(i.n=o),o&&(o.p=i),n._f==r&&(n._f=o),n._l==r&&(n._l=i),n[p]--}return!!r},forEach:function(t){v(this,e);var n,r=s(t,arguments.length>1?arguments[1]:void 0,3);while(n=n?n.n:this._f){r(n.v,n.k,this);while(n&&n.r)n=n.p}},has:function(t){return!!m(v(this,e),t)}}),d&&r(f.prototype,"size",{get:function(){return v(this,e)[p]}}),f},def:function(t,e,n){var r,o,i=m(t,e);return i?i.v=n:(t._l=i={i:o=h(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=i),r&&(r.n=i),t[p]++,"F"!==o&&(t._i[o]=i)),t},getEntry:m,setStrong:function(t,e,n){u(t,e,function(t,n){this._t=v(t,e),this._k=n,this._l=void 0},function(){var t=this,e=t._k,n=t._l;while(n&&n.r)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?f(0,"keys"==e?n.k:"values"==e?n.v:[n.k,n.v]):(t._t=void 0,f(1))},n?"entries":"values",!n,!0),l(e)}}},e0b8:function(t,e,n){"use strict";var r=n("7726"),o=n("5ca1"),i=n("2aba"),s=n("dcbc"),a=n("67ab"),c=n("4a59"),u=n("f605"),f=n("d3f4"),l=n("79e5"),d=n("5cc5"),h=n("7f20"),v=n("5dbc");t.exports=function(t,e,n,p,m,b){var g=r[t],_=g,w=m?"set":"add",y=_&&_.prototype,k={},F=function(t){var e=y[t];i(y,t,"delete"==t?function(t){return!(b&&!f(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(b&&!f(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return b&&!f(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof _&&(b||y.forEach&&!l(function(){(new _).entries().next()}))){var j=new _,z=j[w](b?{}:-0,1)!=j,J=l(function(){j.has(1)}),$=d(function(t){new _(t)}),Q=!b&&l(function(){var t=new _,e=5;while(e--)t[w](e,e);return!t.has(-0)});$||(_=e(function(e,n){u(e,_,t);var r=v(new g,e,_);return void 0!=n&&c(n,m,r[w],r),r}),_.prototype=y,y.constructor=_),(J||Q)&&(F("delete"),F("has"),m&&F("get")),(Q||z)&&F(w),b&&y.clear&&delete y.clear}else _=p.getConstructor(e,t,m,w),s(_.prototype,n),a.NEED=!0;return h(_,t),k[t]=_,o(o.G+o.W+o.F*(_!=g),k),b||p.setStrong(_,t,m),_}},e3ed:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"route_container thread_new"},[n("div",{staticClass:"h1"},[t._v("Post new thread")]),n("div",{staticClass:"thread_meta_info"},[n("div",{staticClass:"thread_meta_info__text"},[t._v("Enter the thread title and the category to post it in")]),n("div",{staticClass:"thread_meta_info__form"},[n("select-button",{attrs:{options:t.categories},model:{value:t.selectedCategory,callback:function(e){t.selectedCategory=e},expression:"selectedCategory"}}),n("fancy-input",{staticClass:"thread_meta_info__title",attrs:{placeholder:"Thread title",error:t.errors.name,large:"true",width:"15rem"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)]),n("div",{staticClass:"editor",class:{"editor--focus":t.focusInput,"editor--error":t.errors.content}},[n("div",{staticClass:"editor__input"},[n("div",{staticClass:"editor__format_bar editor__format_bar--editor"},[t._v("\n\t\t\t\teditor\n\t\t\t")]),n("input-editor-core",{on:{mentions:t.setMentions,focus:function(e){t.setFocusInput(!0)},blur:function(e){t.setFocusInput(!1)}},model:{value:t.editor,callback:function(e){t.editor=e},expression:"editor"}})],1)]),n("error-tooltip",{staticClass:"editor_error",attrs:{error:t.errors.content}}),n("loading-button",{staticClass:"button--green submit",attrs:{loading:t.loading},on:{click:t.postThread}},[t._v("Post thread")])],1)},o=[],i=(n("5df3"),n("4f7f"),n("7f7f"),n("ac6a"),n("87e6")),s=n("b422"),a=n("80e3"),c=n("5016"),u=n("8e8d"),f=n("e145"),l=n("c4b0"),d=n("bd28"),h={name:"ThreadNew",components:{InputEditorCore:i["a"],InputEditorPreview:s["a"],SelectButton:c["a"],FancyInput:a["a"],LoadingButton:u["a"],ErrorTooltip:f["a"]},data:function(){return{selectedCategory:this.$store.state.category.selectedCategory,editor:"",mentions:[],name:"",loading:!1,focusInput:!1,errors:{content:"",name:""}}},computed:{categories:function(){return this.$store.getters.categoriesWithoutAll}},methods:{setErrors:function(t){var e=this;t.forEach(function(t){e.errors[t.name]=t.error})},clearErrors:function(){this.errors.content="",this.errors.name=""},hasDuplicates:function(t,e){return e&&(t=t.map(e)),t.length!==new Set(t).size},postThread:function(){var t,e=this,n=[];this.clearErrors(),this.editor.trim().length||n.push({name:"content",error:"Post content cannot be blank"}),this.name.trim().length||n.push({name:"name",error:"Cannot be blank"}),n.length?this.setErrors(n):(this.loading=!0,this.axios.post("/api/v1/thread",{name:this.name,category:this.selectedCategory}).then(function(n){t=n.data;var r=[];return r.push(e.axios.post("/api/v1/post",{threadId:n.data.id,content:e.editor,mentions:e.mentions})),Promise.all(r)}).then(function(n){e.loading=!1,e.$router.push("/thread/".concat(t.slug,"/").concat(t.id,"/0"))}).catch(function(t){e.loading=!1,Object(l["a"])(e.$store)(t,function(t,n){var r=t.path;void 0!==e.errors[r]?e.errors[r]=t.message:n.push(t.message)})}))},setFocusInput:function(t){this.focusInput=t},setMentions:function(t){this.mentions=t}},watch:{"$store.state.username":function(t){t||this.$router.push("/")}},mounted:function(){this.$store.dispatch("setTitle","new thread"),Object(d["a"])("threadNew")},beforeRouteEnter:function(t,e,n){n(function(t){t.$store.state.username||(t.$store.commit("setAccountModalState",!0),n("/"))})}},v=h,p=(n("f144"),n("2877")),m=Object(p["a"])(v,r,o,!1,null,null,null);m.options.__file="ThreadNew.vue";e["default"]=m.exports},f144:function(t,e,n){"use strict";var r=n("45a3"),o=n.n(r);o.a}}]);
//# sourceMappingURL=chunk-71fc20bf.34ce436d.js.map